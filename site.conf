<VirtualHost *:80>
    ServerName example.com
    DocumentRoot /usr/local/apache2/htdocs

    # Enable rewrite engine
    RewriteEngine On
    
    # If request is not for an actual file
    RewriteCond %{REQUEST_FILENAME} !-f
    # If request is not for an actual directory
    RewriteCond %{REQUEST_FILENAME} !-d
    # Rewrite all requests to index.html
    RewriteRule ^ index.html [L]

    # Enable CORS if needed
    Header set Access-Control-Allow-Origin "*"
    
    # Security headers
    Header set X-Content-Type-Options "nosniff"
    Header set X-Frame-Options "SAMEORIGIN"
    Header set X-XSS-Protection "1; mode=block"

    EnableMMAP Off
    EnableSendfile Off
    
    # Cache static assets
    <FilesMatch "\.(jpg|jpeg|png|gif|ico|css|js)$">
        Header set Cache-Control "max-age=31536000, public"
    </FilesMatch>

    # Don't cache index.html
    <FilesMatch "index\.html$">
        Header set Cache-Control "no-cache, no-store, must-revalidate"
        Header set Pragma "no-cache"
        Header set Expires 0
    </FilesMatch>

    # Enable compression
    AddType text/css .css
AddType application/javascript .js

#AddOutputFilterByType DEFLATE text/html text/plain text/xml text/css text/javascript application/javascript
</VirtualHost>